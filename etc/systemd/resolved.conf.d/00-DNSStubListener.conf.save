# https://askubuntu.com/questions/1012641/dns-set-to-systemds-127-0-0-53-how-to-change-permanently
#https://unix.stackexchange.com/questions/304050/how-to-avoid-conflicts-between-dnsmasq-and-systemd-resolved
# for more info:
# man resolved.conf
# man resolved.conf.d


# Aviod the confliction between dnsmasq and systemd-resolved:

#https://unix.stackexchange.com/questions/304050/how-to-avoid-conflicts-between-dnsmasq-and-systemd-resolved

#In my case (needing to provide a DNS service to other machines) I was able to solve the problem by telling dnsmasq to only bind to the ethernet interface (systemd-resolvd binds to loop-back) by #setting....

#...
#interface=eth0
#...
#bind-interfaces

#in dnsmasq.conf


# So use the following config options for dnsmasq.
# interface=enp*
# bind-interfaces
#
# or disable the sytemd-resolvd:
#sudo systemctl stop systemd-resolved
#sudo systemctl disable systemd-resolved

# or disable the DNSStubListener:
[Resolve]
DNSStubListener=no
# sudo mv /etc/resolv.conf /etc/resolv.conf.save
# then take the change into effect:
# sudo systemctl restart systemd-resolved




